"use strict";import{a as x,button as L,div as k,h1 as I,h2 as E,img as P,input as H,mountableStylesheet as W,p as A,span as M,checkbox as S}from"../minjs_v000/domHelper.min.js";import{fetchApi as T,isMobile as U}from"../lib/lib.js";export default function(t){console.log("Home Init");const e=W("./res/pages/home.css");let n;const l=k("introduction",k("block",P("./res/assets/page_home/sort_function.png"),E("排序功能","title"),A("可對搜尋結果的任意欄位進行排序")),k("block",P("./res/assets/page_home/ncku_hub_comment_function.png"),E("NCKU HUB評論","title"),A("點擊課程評分即可查看評論")),k("block",P("./res/assets/page_home/urschool_instructor_info_function.png"),E("UrSchool教授評價","title"),A("點擊教師姓名查看講師評價、詳細資料及評論")),k("block",P("./res/assets/page_home/category_filter_function.png"),E("搜尋結果篩選","title"),A("可以自由選擇篩選條件，提供衝堂、精確節次、班別等篩選器")),k("block",P("./res/assets/page_home/schedule_download_function.png"),E("課表下載","title"),A("提供預排課表檢視，課表下載功能，下載漂亮的課表🥰")),k("block",P("./res/assets/page_home/add_course_function.png"),E("支援預排、選課","title"),A("登入後可跟選課網站連動，進行預排、志願登記、單科加選等操作"),A("搶課一律以成大系統為主，若使用本網站搶課未成功一概不負責","small"))),s=function(){let c;const d=[P("res/assets/icon/icon_64.svg",""),P("https://sticker-assets.dcard.tw/images/4d5acaf6-fb1c-4110-8538-6d2d651b410a/full.png",""),P("https://sticker-assets.dcard.tw/images/b5c7eddc-8dd9-40e9-ba4b-358323a45713/full.png",""),P("https://sticker-assets.dcard.tw/images/84eddd38-497c-41d6-8845-ec8b57498c6a/full.png",""),P("https://sticker-assets.dcard.tw/images/102eb5ae-3f1e-4b28-8866-905a64f87c9b/full.png","")];let u=0,m=0;const p=k("rippleable",{onclick:e=>{var t,n=(e=e).currentTarget,l=document.createElement("div"),s=Math.sqrt(n.clientWidth*n.clientWidth+n.clientHeight*n.clientHeight),o=(l.style.width=l.style.height=2*s+"px",n.getBoundingClientRect&&n.getBoundingClientRect()),e=(o?(l.style.top=e.pageY-(o.top+s)+"px",l.style.left=e.pageX-(o.left+s)+"px"):l.style.top=l.style.left="0",l.classList.add("ripple"),n.getElementsByClassName("ripple")),a=Date.now&&Date.now()||-1,i=(l.createTime=a,[]);for(const r of e)(-1===a||600<a-r.createTime)&&i.push(r);for(t of i)t.parentElement.removeChild(t);n.appendChild(l),5==++m&&(m=0,++u===d.length&&(u=0),c.data.iconImageStyle=u,c.save(),p.replaceChild(d[u],p.firstChild))}}),e=M(null,"slideOut",P("./res/assets/page_home/logo_plusplus_text.svg","++"));return k("main",{init:e=>{c=e,u=c.data.iconImageStyle||0,p.appendChild(d[u])},onPageOpen:()=>setTimeout(()=>e.style.width=e.firstElementChild.offsetWidth+"px",700),onPageClose:()=>e.style.width=null},I(null,"title",p,P("./res/assets/page_home/logo_text.svg","NCKU"),e),A(null,"description",M("結合 NCKU HUB・UrSchool・成大選課系統",null,{style:"letter-spacing: 3.2px"}),M("眾多功能，提供更好的選課環境。",null,{style:"font-size:48px;font-weight:700;letter-spacing:4.8px"})),k("quickSearch",H("searchInput","Search...",null,null),L(null,null,null,P("./res/assets/search_icon.svg",""),M("課程查詢"))))}(),o=k("siteInfo",s,function(){const l=[S(null,!0,null,M("英語授課")),S("gray",!0,null,M("大學國文")),S(null,!0,null,M("新聞傳播學程")),S("gray",!0,null,M("社會資料科學學分學程")),S("gray",!0,null,M("外國語言")),S(null,!0,null,M("Coursera"))];let t=-10,n=-10;for(const S of l)S.direction=2*Math.random()*Math.PI,S.speed=1.5*Math.random()+.5,S.x=0,S.y=0,S.style.transform="translate("+S.x+"px,"+S.y+"px)";return setInterval(function(){for(const n of l){n.direction+=5/180*Math.PI;var e=Math.cos(n.direction)*n.speed,t=Math.sin(n.direction)*n.speed;n.x+=e,n.y+=t,n.style.transform="translate("+n.x+"px,"+n.y+"px)"}},200),k("filterFeature",k("animationBox",l,{onmousemove:function(e){t=e.offsetX,n=e.offsetY}}),P("./res/assets/filter_menu_icon.svg",""),E("搜尋結果篩選"),A("可以自由選擇篩選條件，提供衝堂、精選節次、班別等篩選器，讓你選課不卡卡！"))}()),a=k("scrollDownIndicator",{onclick:function(){_=!0,U()?this.lastElementChild.scrollIntoView&&this.lastElementChild.scrollIntoView({behavior:"smooth"}):this.scrollIntoView&&this.scrollIntoView({behavior:"smooth"})}},P("./res/assets/down_arrow_icon.svg","","scrollDownArrow")),i=k("newsPanel",k("splitLine"),k("items")),r=k("bulletinPanel",I("資訊","title"),k("splitLine"),k("items"));let c=!1,d=!1,u=0;const m={enrollmentAnnouncement:"選課公告",enrollmentInformation:"選課資訊",enrollmentFAQs:"選課FAQs",exploringTainan:"踏溯台南路線選擇系統",serviceRecommended:"服務學習推薦專區",contactInformation:"課程資訊服務聯絡窗口"},p=document.createElement("link");p.rel="canonical";let h=!(p.href="https://wavjaby.github.io/NCKUpp/"),f=0;l.onmouseenter=function(){h=!0},l.onmouseleave=function(){h=!1};let g=0,b=0,v=!1,_=!0;function w(){var e=Date.now(),t=e-u;l.scrollLeft!==b?(b=l.scrollLeft,_=!0,u=e,requestAnimationFrame(w)):_?(2e3<t&&(_=!1,u=e),requestAnimationFrame(w)):(u=e,1<(g+=t/1e3*40)&&(v?--l.scrollLeft:l.scrollLeft+=1,b=l.scrollLeft,g%=1),0===l.scrollLeft?v=!1:l.scrollWidth-l.clientWidth-l.scrollLeft<1&&(v=!0,_=!0),c&&requestAnimationFrame(w))}function C(e){h&&(e.preventDefault(),_||(f=l.scrollLeft),_=!0,l.scrollTo?((f+=e.deltaY)<0&&(f=0),l.scrollWidth-l.clientWidth-f<0&&(f=l.scrollWidth-l.clientWidth),l.scrollLeft!==f&&l.scrollTo({left:f,behavior:"smooth"})):l.scrollLeft+=e.deltaY)}function y(){var e=t.element.scrollTop/o.offsetHeight;d=.5<e?(d||a.classList.add("toLeft"),!0):(d&&a.classList.remove("toLeft"),!1)}return k("home",{onRender:function(){console.log("Home Render"),e.mount(),n=t.getPageStorage(this,0),s.init(n),T("/homeInfo").then(e=>{if(null!=e&&e.success&&e.data){var e=e.data,t=i.lastElementChild;for(const o of e.news){var n=o.contents.map(e=>e instanceof Object?x(e.content,e.url,null,null,{target:"_blank"}):M(e));t.appendChild(k("news",M(o.department,"department"),A(null,"content",n),M(o.date,"date")))}var l=r.lastElementChild,s=e.bulletin;l.appendChild(x("原選課系統","https://course.ncku.edu.tw/","bulletin",null,{target:"_blank"}));for(const a in s)l.appendChild(x(m[a],s[a],"bulletin",null,{target:"_blank"}))}})},onPageClose:function(){console.log("Home Close"),e.disable(),document.head.removeChild(p),s.onPageClose(),t.element.removeEventListener("scroll",y),t.element.removeEventListener("wheel",C),c=!1},onPageOpen:function(){console.log("Home Open"),e.enable(),document.head.appendChild(p),s.onPageOpen(),t.element.addEventListener("scroll",y),t.element.addEventListener("wheel",C),c=!0,u=Date.now(),w()}},o,a,k("panels",i,r))}
//# sourceMappingURL=home.min.js.map