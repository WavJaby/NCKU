"use strict";import{a as x,button as H,div as S,h1 as W,h2 as A,img as T,input as U,mountableStylesheet as D,p as j,span as q}from"../minjs_v000/domHelper.min.js";import{fetchApi as B,isMobile as F}from"../lib/lib.js";export default function(t){console.log("Home Init");const e=D("./res/pages/home.css");let r;const l=q(null,"slideOut",T("./res/assets/page_home/logo_plusplus_text.svg","++")),n=S("introduction",S("block",T("./res/assets/page_home/sort_function.png"),A("排序功能","title"),j("可對搜尋結果的任意欄位進行排序")),S("block",T("./res/assets/page_home/ncku_hub_comment_function.png"),A("NCKU HUB評論","title"),j("點擊課程評分即可查看評論")),S("block",T("./res/assets/page_home/urschool_instructor_info_function.png"),A("UrSchool教授評價","title"),j("點擊教師姓名查看講師評價、詳細資料及評論")),S("block",T("./res/assets/page_home/category_filter_function.png"),A("搜尋結果篩選","title"),j("可以自由選擇篩選條件，提供衝堂、精確節次、班別等篩選器")),S("block",T("./res/assets/page_home/schedule_download_function.png"),A("課表下載","title"),j("提供預排課表檢視，課表下載功能，下載漂亮的課表🥰")),S("block",T("./res/assets/page_home/add_course_function.png"),A("支援預排、選課","title"),j("登入後可跟選課網站連動，進行預排、志願登記、單科加選等操作"),j("搶課一律以成大系統為主，若使用本網站搶課未成功一概不負責","small"))),d=[T("res/assets/icon/icon_64.svg",""),T("https://sticker-assets.dcard.tw/images/4d5acaf6-fb1c-4110-8538-6d2d651b410a/full.png",""),T("https://sticker-assets.dcard.tw/images/b5c7eddc-8dd9-40e9-ba4b-358323a45713/full.png",""),T("https://sticker-assets.dcard.tw/images/84eddd38-497c-41d6-8845-ec8b57498c6a/full.png",""),T("https://sticker-assets.dcard.tw/images/102eb5ae-3f1e-4b28-8866-905a64f87c9b/full.png","")];let m=0,p=0;const h=S("rippleable",{onclick:e=>{var t,l=(e=e).currentTarget,n=document.createElement("div"),s=Math.sqrt(l.clientWidth*l.clientWidth+l.clientHeight*l.clientHeight),o=(n.style.width=n.style.height=2*s+"px",l.getBoundingClientRect&&l.getBoundingClientRect()),e=(o?(n.style.top=e.pageY-(o.top+s)+"px",n.style.left=e.pageX-(o.left+s)+"px"):n.style.top=n.style.left="0",n.classList.add("ripple"),l.getElementsByClassName("ripple")),i=Date.now&&Date.now()||-1,a=(n.createTime=i,[]);for(const c of e)(-1===i||600<i-c.createTime)&&a.push(c);for(t of a)t.parentElement.removeChild(t);l.appendChild(n),5==++p&&(p=0,++m===d.length&&(m=0),r.data.iconImageStyle=m,r.save(),h.replaceChild(d[m],h.firstChild))}}),s=S("siteInfo",S("main",W(null,"title",h,T("./res/assets/page_home/logo_text.svg","NCKU"),l),j(null,"description",q("結合 NCKU HUB・UrSchool・成大選課系統",null,{style:"letter-spacing: 3.2px"}),q("眾多功能，提供更好的選課環境。",null,{style:"font-size:48px;font-weight:700;letter-spacing:4.8px"})),S("quickSearch",U("searchInput","Search...",null,null),H(null,null,null,T("./res/assets/search_icon.svg",""),q("課程查詢"))))),o=S("scrollDownIndicator",{onclick:function(){k=!0,F()?this.lastElementChild.scrollIntoView&&this.lastElementChild.scrollIntoView({behavior:"smooth"}):this.scrollIntoView&&this.scrollIntoView({behavior:"smooth"})}},T("./res/assets/down_arrow_icon.svg","","scrollDownArrow")),a=S("newsPanel",S("splitLine"),S("items")),c=S("bulletinPanel",W("資訊","title"),S("splitLine"),S("items"));let i=!1,u=!1,f=0;const g={enrollmentAnnouncement:"選課公告",enrollmentInformation:"選課資訊",enrollmentFAQs:"選課FAQs",exploringTainan:"踏溯台南路線選擇系統",serviceRecommended:"服務學習推薦專區",contactInformation:"課程資訊服務聯絡窗口"},b=document.createElement("link");b.rel="canonical";let _=!(b.href="https://wavjaby.github.io/NCKUpp/"),v=0;n.onmouseenter=function(){_=!0},n.onmouseleave=function(){_=!1};let w=0,C=0,L=!1,k=!0;function y(){var e=Date.now(),t=e-f;n.scrollLeft!==C?(C=n.scrollLeft,k=!0,f=e,requestAnimationFrame(y)):k?(2e3<t&&(k=!1,f=e),requestAnimationFrame(y)):(f=e,1<(w+=t/1e3*40)&&(L?--n.scrollLeft:n.scrollLeft+=1,C=n.scrollLeft,w%=1),0===n.scrollLeft?L=!1:n.scrollWidth-n.clientWidth-n.scrollLeft<1&&(L=!0,k=!0),i&&requestAnimationFrame(y))}function E(e){_&&(e.preventDefault(),k||(v=n.scrollLeft),k=!0,n.scrollTo?((v+=e.deltaY)<0&&(v=0),n.scrollWidth-n.clientWidth-v<0&&(v=n.scrollWidth-n.clientWidth),n.scrollLeft!==v&&n.scrollTo({left:v,behavior:"smooth"})):n.scrollLeft+=e.deltaY)}function I(){var e=t.element.scrollTop/s.offsetHeight;e<=1&&(s.style.opacity=(1-1.2*e).toString()),u=.5<e?(u||o.classList.add("toLeft"),!0):(u&&o.classList.remove("toLeft"),!1)}return S("home",{onRender:function(){console.log("Home Render"),e.mount(),r=t.getPageStorage(this,0),m=r.data.iconImageStyle||0,h.appendChild(d[m]),B("/homeInfo").then(e=>{if(null!=e&&e.success&&e.data){var e=e.data,t=a.lastElementChild;for(const o of e.news){var l=o.contents.map(e=>e instanceof Object?x(e.content,e.url,null,null,{target:"_blank"}):q(e));t.appendChild(S("news",q(o.department,"department"),j(null,"content",l),q(o.date,"date")))}var n=c.lastElementChild,s=e.bulletin;n.appendChild(x("原選課系統","https://course.ncku.edu.tw/","bulletin",null,{target:"_blank"}));for(const i in s)n.appendChild(x(g[i],s[i],"bulletin",null,{target:"_blank"}))}})},onPageClose:function(){console.log("Home Close"),e.disable(),l.style.width=null,document.head.removeChild(b),t.element.removeEventListener("scroll",I),t.element.removeEventListener("wheel",E),i=!1},onPageOpen:function(){console.log("Home Open"),e.enable(),setTimeout(()=>l.style.width=l.firstElementChild.offsetWidth+"px",700),document.head.appendChild(b),t.element.addEventListener("scroll",I),t.element.addEventListener("wheel",E),i=!0,f=Date.now(),y()}},s,o,S("panels",a,c))}
//# sourceMappingURL=home.min.js.map