"use strict";import{a as p,button as n,checkbox as l,div as f,h1 as g,h2 as d,img as b,input as s,mountableStylesheet as v,p as _,span as w}from"../minjs_v000/domHelper.min.js";import{fetchApi as C,isMobile as y}from"../lib/lib.js";export default function(t){console.log("Home Init");const e=v("./res/pages/home.css");let n;const l=new k,s=new L,o=new I,i=f("siteIntro",l.element,f("intro",s.element,o.element)),a=f("scrollDownIndicator",{onclick:function(){y()?this.lastElementChild.scrollIntoView&&this.lastElementChild.scrollIntoView({behavior:"smooth"}):this.scrollIntoView&&this.scrollIntoView({behavior:"smooth"})}},b("./res/assets/down_arrow_icon.svg","","scrollDownArrow")),c=f("newsPanel",g("最新消息","title"),f("splitLine"),f("items")),r=f("bulletinPanel",g("資訊","title"),f("splitLine"),f("items"));let d=!1;const h={enrollmentAnnouncement:"選課公告",enrollmentInformation:"選課資訊",enrollmentFAQs:"選課FAQs",exploringTainan:"踏溯台南路線選擇系統",serviceRecommended:"服務學習推薦專區",contactInformation:"課程資訊服務聯絡窗口"},u=document.createElement("link");function m(){var e=t.element.scrollTop/i.offsetHeight;d=.5<e?(d||a.classList.add("toLeft"),!0):(d&&a.classList.remove("toLeft"),!1)}return u.rel="canonical",u.href="https://wavjaby.github.io/NCKUpp/",f("home",{onRender:function(){console.log("Home Render"),e.mount(),n=t.getPageStorage(this,0),l.init(n),C("/homeInfo").then(e=>{if(e.success&&e.data){var e=e.data,t=c.lastElementChild;for(const o of e.news){var n=o.contents.map(e=>e instanceof Object?p(e.content,e.url,null,null,{target:"_blank"}):w(e));t.appendChild(f("news",w(o.department,"department"),_(null,"content",n),w(o.date,"date")))}var l=r.lastElementChild,s=e.bulletin;l.appendChild(p("原選課系統","https://course.ncku.edu.tw/","bulletin",null,{target:"_blank"}));for(const i in s)l.appendChild(p(h[i],s[i],"bulletin",null,{target:"_blank"}))}})},onPageClose:function(){console.log("Home Close"),e.disable(),document.head.removeChild(u),l.onPageClose(),s.stopAnimation(),o.stopAnimation(),t.element.removeEventListener("scroll",m)},onPageOpen:function(){console.log("Home Open"),e.enable(),document.head.appendChild(u),l.onPageOpen(),s.startAnimation(),o.startAnimation(),t.element.addEventListener("scroll",m)}},i,f("panels",c,r))}function k(){let r;const d=[()=>b("res/assets/icon/icon_64.svg",""),()=>b("https://sticker-assets.dcard.tw/images/4d5acaf6-fb1c-4110-8538-6d2d651b410a/full.png",""),()=>b("https://sticker-assets.dcard.tw/images/b5c7eddc-8dd9-40e9-ba4b-358323a45713/full.png",""),()=>b("https://sticker-assets.dcard.tw/images/84eddd38-497c-41d6-8845-ec8b57498c6a/full.png",""),()=>b("https://sticker-assets.dcard.tw/images/102eb5ae-3f1e-4b28-8866-905a64f87c9b/full.png","")];let h=0,u=0;const m=f("rippleable",{onclick:e=>{var t,n=(e=e).currentTarget,l=document.createElement("div"),s=Math.sqrt(n.clientWidth*n.clientWidth+n.clientHeight*n.clientHeight),o=(l.style.width=l.style.height=2*s+"px",n.getBoundingClientRect&&n.getBoundingClientRect()),e=(o?(l.style.top=e.pageY-(o.top+s)+"px",l.style.left=e.pageX-(o.left+s)+"px"):l.style.top=l.style.left="0",l.classList.add("ripple"),n.getElementsByClassName("ripple")),i=Date.now&&Date.now()||-1,a=(l.createTime=i,[]);for(const c of e)(-1===i||600<i-c.createTime)&&a.push(c);for(t of a)t.parentElement.removeChild(t);n.appendChild(l),5==++u&&(u=0,++h===d.length&&(h=0),r.data.iconImageStyle=h,r.save(),d[h]instanceof Function&&(d[h]=d[h]()),m.replaceChild(d[h],m.firstChild))}}),e=w(null,"slideOut",b("./res/assets/page_home/logo_plusplus_text.svg","++"),{style:"width:0"});function t(){e.style.width=e.firstElementChild.offsetWidth+"px",setTimeout(()=>e.style.width=null,400)}this.init=function(e){r=e,h=r.data.iconImageStyle||0,d[h]instanceof Function&&(d[h]=d[h]()),m.appendChild(d[h])},this.onPageOpen=()=>setTimeout(t,700),this.onPageClose=()=>e.style.width="0",this.element=f("main",g(null,"title",m,b("./res/assets/page_home/logo_text.svg","NCKU"),e),_(null,"description",w("結合 NCKU HUB・UrSchool・成大選課系統","l1"),w("眾多功能，提供更好的選課環境。","l2")),f("quickSearch",s("searchInput","Search...",null,null),n(null,null,null,b("./res/assets/search_icon.svg",""),w("課程查詢"))))}function L(){const e=[l(null,!0,null,w("英語授課")),l("gray",!0,null,w("大學國文")),l(null,!0,null,w("新聞傳播學程")),l("gray",!0,null,w("生物科技學程")),l("gray",!0,null,w("外國語言")),l(null,!0,null,w("Coursera"))],i=200;let a=-i,c=-i,t;for(const l of e)l.direction=2*Math.random()*Math.PI,l.speed=1.5*Math.random()+.2,l.x=0,l.y=0,l.angle=Math.random()<.5?5:-5,l.scale="scale("+(.5*Math.random()+.7)+")",l.style.transform="translate("+l.x+"px,"+l.y+"px) "+l.scale;function n(){for(const o of e){let e=0,t=0;var n=a-o.offsetLeft-o.offsetWidth/2,l=c-o.offsetTop-o.offsetHeight/2,s=Math.sqrt(n*n+l*l),n=(s<i&&(e=-n/s*(i-s)*.5,t=-l/s*(i-s)*.5),o.direction+=o.angle/180*Math.PI,Math.cos(o.direction)*o.speed),l=Math.sin(o.direction)*o.speed;o.x+=n,o.y+=l,o.style.transform="translate("+(o.x+e)+"px,"+(o.y+t)+"px) "+o.scale}}this.startAnimation=()=>t=setInterval(n,100),this.stopAnimation=()=>clearInterval(t),this.element=f("filterFeature",f("animationBox",e,{onmousemove:function(e){var t=e.currentTarget.getBoundingClientRect();a=e.pageX-t.left,c=e.pageY-t.top}}),d("搜尋結果篩選"),b("./res/assets/filter_menu_icon.svg",""),_("可以自由選擇篩選條件，提供衝堂、精選節次、班別等篩選器，讓你選課不卡卡！"))}function I(){const n=this.element=f("featureList",f("block",{onwheel:function(e){t&&(e.preventDefault(),c||(l=n.scrollLeft),c=!0,n.scrollTo?((l+=e.deltaY)<0&&(l=0),n.scrollWidth-n.clientWidth-l<0&&(l=n.scrollWidth-n.clientWidth),n.scrollLeft!==l&&n.scrollTo({left:l,behavior:"smooth"})):n.scrollLeft+=e.deltaY)}},b("./res/assets/page_home/schedule_download_function.png"),d("課表下載","title"),_("提供預排課表檢視和自訂課表下載功能，成為排課大師！")),f("block bg1",b("./res/assets/page_home/add_course_function.png"),d("支援預排、選課","title"),_("登入後與成大連動，可進行預排、志願登記、單科加選等操作。")),f("block bg2",b("./res/assets/page_home/ncku_hub_comment_function.png"),d("NCKU HUB評論","title"),_("引入NCKU HUB，提供更人性化的評論查詢")),f("block",b("./res/assets/page_home/sort_function.png"),d("排序功能","title"),_("對搜尋結果的任意欄位進行排序，找到你的課程！")),f("block bg1",b("./res/assets/page_home/category_filter_function.png"),d("搜尋結果篩選","title"),_("可以自由選擇篩選條件，提供衝堂、精確節次、班別等篩選器")),f("block bg2",b("./res/assets/page_home/urschool_instructor_info_function.png"),d("UrSchool教授評價","title"),_("點擊教師姓名查看講師評價、詳細資料及評論")));let t=!1,l=0,s=0,o=0,i=0,a=!1,c=!0,e=null;function r(){var e=Date.now(),t=e-s;n.scrollLeft!==i?(i=n.scrollLeft,c=!0,s=e):c?2e3<t&&(c=!1,s=e):(s=e,1<(o+=t/1e3*100)&&(e=a?-1:1,n.scrollLeft+=e,i=n.scrollLeft,o%=1),0===n.scrollLeft?a=!1:n.scrollWidth-n.clientWidth-n.scrollLeft<1&&(a=!0,c=!0))}this.onmouseenter=function(){t=!0},this.onmouseleave=function(){t=!1},this.startAnimation=()=>e=setInterval(r,100),this.stopAnimation=function(){clearInterval(e)}}
//# sourceMappingURL=home.min.js.map