"use strict";import{a as u,button as m,div as f,h1 as g,h2 as h,img as b,input as v,mountableStylesheet as C,p as w,span as y,checkbox as x}from"../minjs_v000/domHelper.min.js";import{fetchApi as I,isMobile as _}from"../lib/lib.js";export default function(t){console.log("Home Init");const e=C("./res/pages/home.css");let n;const l=function(){let c;const d=[b("res/assets/icon/icon_64.svg",""),b("https://sticker-assets.dcard.tw/images/4d5acaf6-fb1c-4110-8538-6d2d651b410a/full.png",""),b("https://sticker-assets.dcard.tw/images/b5c7eddc-8dd9-40e9-ba4b-358323a45713/full.png",""),b("https://sticker-assets.dcard.tw/images/84eddd38-497c-41d6-8845-ec8b57498c6a/full.png",""),b("https://sticker-assets.dcard.tw/images/102eb5ae-3f1e-4b28-8866-905a64f87c9b/full.png","")];let p=0,u=0;const h=f("rippleable",{onclick:e=>{var t,n=(e=e).currentTarget,l=document.createElement("div"),s=Math.sqrt(n.clientWidth*n.clientWidth+n.clientHeight*n.clientHeight),o=(l.style.width=l.style.height=2*s+"px",n.getBoundingClientRect&&n.getBoundingClientRect()),e=(o?(l.style.top=e.pageY-(o.top+s)+"px",l.style.left=e.pageX-(o.left+s)+"px"):l.style.top=l.style.left="0",l.classList.add("ripple"),n.getElementsByClassName("ripple")),a=Date.now&&Date.now()||-1,i=(l.createTime=a,[]);for(const r of e)(-1===a||600<a-r.createTime)&&i.push(r);for(t of i)t.parentElement.removeChild(t);n.appendChild(l),5==++u&&(u=0,++p===d.length&&(p=0),c.data.iconImageStyle=p,c.save(),h.replaceChild(d[p],h.firstChild))}}),e=y(null,"slideOut",b("./res/assets/page_home/logo_plusplus_text.svg","++"));return f("main",{init:e=>{c=e,p=c.data.iconImageStyle||0,h.appendChild(d[p])},onPageOpen:()=>setTimeout(()=>e.style.width=e.firstElementChild.offsetWidth+"px",700),onPageClose:()=>e.style.width=null},g(null,"title",h,b("./res/assets/page_home/logo_text.svg","NCKU"),e),w(null,"description",y("結合 NCKU HUB・UrSchool・成大選課系統",null,{style:"letter-spacing: 3.2px"}),y("眾多功能，提供更好的選課環境。",null,{style:"font-size:48px;font-weight:700;letter-spacing:4.8px"})),f("quickSearch",v("searchInput","Search...",null,null),m(null,null,null,b("./res/assets/search_icon.svg",""),y("課程查詢"))))}(),s=f("siteInfo",l,function(){const e=[x(null,!0,null,y("英語授課")),x("gray",!0,null,y("大學國文")),x(null,!0,null,y("新聞傳播學程")),x("gray",!0,null,y("社會資料科學學分學程")),x("gray",!0,null,y("外國語言")),x(null,!0,null,y("Coursera"))];let a=-200,i=-200;for(const x of e)x.direction=2*Math.random()*Math.PI,x.speed=1.5*Math.random()+.5,x.x=0,x.y=0,x.style.transform="translate("+x.x+"px,"+x.y+"px)";return setInterval(function(){for(const o of e){let e=0,t=0;var n=a-o.offsetLeft-o.offsetWidth/2,l=i-o.offsetTop-o.offsetHeight/2,s=Math.sqrt(n*n+l*l),n=(s<200&&(e=-n/s*(200-s)*.5,t=-l/s*(200-s)*.5),o.direction+=5/180*Math.PI,Math.cos(o.direction)*o.speed),l=Math.sin(o.direction)*o.speed;o.x+=n,o.y+=l,o.style.transform="translate("+(o.x+e)+"px,"+(o.y+t)+"px)"}},100),f("filterFeature",f("animationBox",e,{onmousemove:function(e){var t=e.currentTarget.getBoundingClientRect();a=e.pageX-t.left,i=e.pageY-t.top}}),b("./res/assets/filter_menu_icon.svg",""),h("搜尋結果篩選"),w("可以自由選擇篩選條件，提供衝堂、精選節次、班別等篩選器，讓你選課不卡卡！"))}()),o=f("scrollDownIndicator",{onclick:function(){_()?this.lastElementChild.scrollIntoView&&this.lastElementChild.scrollIntoView({behavior:"smooth"}):this.scrollIntoView&&this.scrollIntoView({behavior:"smooth"})}},b("./res/assets/down_arrow_icon.svg","","scrollDownArrow")),i=f("newsPanel",f("splitLine"),f("items")),r=f("bulletinPanel",g("資訊","title"),f("splitLine"),f("items"));let a=!1;const c={enrollmentAnnouncement:"選課公告",enrollmentInformation:"選課資訊",enrollmentFAQs:"選課FAQs",exploringTainan:"踏溯台南路線選擇系統",serviceRecommended:"服務學習推薦專區",contactInformation:"課程資訊服務聯絡窗口"},d=document.createElement("link");function p(){var e=t.element.scrollTop/s.offsetHeight;a=.5<e?(a||o.classList.add("toLeft"),!0):(a&&o.classList.remove("toLeft"),!1)}return d.rel="canonical",d.href="https://wavjaby.github.io/NCKUpp/",f("home",{onRender:function(){console.log("Home Render"),e.mount(),n=t.getPageStorage(this,0),l.init(n),I("/homeInfo").then(e=>{if(null!=e&&e.success&&e.data){var e=e.data,t=i.lastElementChild;for(const o of e.news){var n=o.contents.map(e=>e instanceof Object?u(e.content,e.url,null,null,{target:"_blank"}):y(e));t.appendChild(f("news",y(o.department,"department"),w(null,"content",n),y(o.date,"date")))}var l=r.lastElementChild,s=e.bulletin;l.appendChild(u("原選課系統","https://course.ncku.edu.tw/","bulletin",null,{target:"_blank"}));for(const a in s)l.appendChild(u(c[a],s[a],"bulletin",null,{target:"_blank"}))}})},onPageClose:function(){console.log("Home Close"),e.disable(),document.head.removeChild(d),l.onPageClose(),t.element.removeEventListener("scroll",p)},onPageOpen:function(){console.log("Home Open"),e.enable(),document.head.appendChild(d),l.onPageOpen(),t.element.addEventListener("scroll",p)}},s,o,f("panels",i,r))}
//# sourceMappingURL=home.min.js.map