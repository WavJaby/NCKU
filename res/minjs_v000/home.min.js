"use strict";import{a as u,button as h,checkbox as f,div as g,h1 as b,h2 as v,img as C,input as w,mountableStylesheet as y,p as x,span as I}from"../minjs_v000/domHelper.min.js";import{fetchApi as _,isMobile as k}from"../lib/lib.js";export default function(t){console.log("Home Init");const e=y("./res/pages/home.css");let n;const l=function(){let c;const d=[C("res/assets/icon/icon_64.svg",""),C("https://sticker-assets.dcard.tw/images/4d5acaf6-fb1c-4110-8538-6d2d651b410a/full.png",""),C("https://sticker-assets.dcard.tw/images/b5c7eddc-8dd9-40e9-ba4b-358323a45713/full.png",""),C("https://sticker-assets.dcard.tw/images/84eddd38-497c-41d6-8845-ec8b57498c6a/full.png",""),C("https://sticker-assets.dcard.tw/images/102eb5ae-3f1e-4b28-8866-905a64f87c9b/full.png","")];let p=0,m=0;const u=g("rippleable",{onclick:e=>{var t,n=(e=e).currentTarget,l=document.createElement("div"),s=Math.sqrt(n.clientWidth*n.clientWidth+n.clientHeight*n.clientHeight),o=(l.style.width=l.style.height=2*s+"px",n.getBoundingClientRect&&n.getBoundingClientRect()),e=(o?(l.style.top=e.pageY-(o.top+s)+"px",l.style.left=e.pageX-(o.left+s)+"px"):l.style.top=l.style.left="0",l.classList.add("ripple"),n.getElementsByClassName("ripple")),a=Date.now&&Date.now()||-1,i=(l.createTime=a,[]);for(const r of e)(-1===a||600<a-r.createTime)&&i.push(r);for(t of i)t.parentElement.removeChild(t);n.appendChild(l),5==++m&&(m=0,++p===d.length&&(p=0),c.data.iconImageStyle=p,c.save(),u.replaceChild(d[p],u.firstChild))}}),e=I(null,"slideOut",C("./res/assets/page_home/logo_plusplus_text.svg","++"),{style:"width:0"});return g("main",{init:e=>{c=e,p=c.data.iconImageStyle||0,u.appendChild(d[p])},onPageOpen:()=>setTimeout(t,700),onPageClose:()=>e.style.width="0"},b(null,"title",u,C("./res/assets/page_home/logo_text.svg","NCKU"),e),x(null,"description",I("結合 NCKU HUB・UrSchool・成大選課系統","l1"),I("眾多功能，提供更好的選課環境。","l2")),g("quickSearch",w("searchInput","Search...",null,null),h(null,null,null,C("./res/assets/search_icon.svg",""),I("課程查詢"))));function t(){e.style.width=e.firstElementChild.offsetWidth+"px",setTimeout(()=>e.style.width=null,400)}}(),s=function(){const e=[f(null,!0,null,I("英語授課")),f("gray",!0,null,I("大學國文")),f(null,!0,null,I("新聞傳播學程")),f("gray",!0,null,I("生物科技學程")),f("gray",!0,null,I("外國語言")),f(null,!0,null,I("Coursera"))];let a=-200,i=-200,t;for(const f of e)f.direction=2*Math.random()*Math.PI,f.speed=1.5*Math.random()+.2,f.x=0,f.y=0,f.angle=Math.random()<.5?5:-5,f.scale="scale("+(.5*Math.random()+.7)+")",f.style.transform="translate("+f.x+"px,"+f.y+"px) "+f.scale;return g("filterFeature",{startAnimation:()=>t=setInterval(n,100),stopAnimation:()=>clearInterval(t)},g("animationBox",e,{onmousemove:function(e){var t=e.currentTarget.getBoundingClientRect();a=e.pageX-t.left,i=e.pageY-t.top}}),v("搜尋結果篩選"),C("./res/assets/filter_menu_icon.svg",""),x("可以自由選擇篩選條件，提供衝堂、精選節次、班別等篩選器，讓你選課不卡卡！"));function n(){for(const o of e){let e=0,t=0;var n=a-o.offsetLeft-o.offsetWidth/2,l=i-o.offsetTop-o.offsetHeight/2,s=Math.sqrt(n*n+l*l),n=(s<200&&(e=-n/s*(200-s)*.5,t=-l/s*(200-s)*.5),o.direction+=o.angle/180*Math.PI,Math.cos(o.direction)*o.speed),l=Math.sin(o.direction)*o.speed;o.x+=n,o.y+=l,o.style.transform="translate("+(o.x+e)+"px,"+(o.y+t)+"px) "+o.scale}}}(),o=g("siteInfo",l,s),a=g("scrollDownIndicator",{onclick:function(){k()?this.lastElementChild.scrollIntoView&&this.lastElementChild.scrollIntoView({behavior:"smooth"}):this.scrollIntoView&&this.scrollIntoView({behavior:"smooth"})}},C("./res/assets/down_arrow_icon.svg","","scrollDownArrow")),i=g("newsPanel",b("最新消息","title"),g("splitLine"),g("items")),r=g("bulletinPanel",b("資訊","title"),g("splitLine"),g("items"));let c=!1;const d={enrollmentAnnouncement:"選課公告",enrollmentInformation:"選課資訊",enrollmentFAQs:"選課FAQs",exploringTainan:"踏溯台南路線選擇系統",serviceRecommended:"服務學習推薦專區",contactInformation:"課程資訊服務聯絡窗口"},p=document.createElement("link");function m(){var e=t.element.scrollTop/o.offsetHeight;c=.5<e?(c||a.classList.add("toLeft"),!0):(c&&a.classList.remove("toLeft"),!1)}return p.rel="canonical",p.href="https://wavjaby.github.io/NCKUpp/",g("home",{onRender:function(){console.log("Home Render"),e.mount(),n=t.getPageStorage(this,0),l.init(n),_("/homeInfo").then(e=>{if(null!=e&&e.success&&e.data){var e=e.data,t=i.lastElementChild;for(const o of e.news){var n=o.contents.map(e=>e instanceof Object?u(e.content,e.url,null,null,{target:"_blank"}):I(e));t.appendChild(g("news",I(o.department,"department"),x(null,"content",n),I(o.date,"date")))}var l=r.lastElementChild,s=e.bulletin;l.appendChild(u("原選課系統","https://course.ncku.edu.tw/","bulletin",null,{target:"_blank"}));for(const a in s)l.appendChild(u(d[a],s[a],"bulletin",null,{target:"_blank"}))}})},onPageClose:function(){console.log("Home Close"),e.disable(),document.head.removeChild(p),l.onPageClose(),s.stopAnimation(),t.element.removeEventListener("scroll",m)},onPageOpen:function(){console.log("Home Open"),e.enable(),document.head.appendChild(p),l.onPageOpen(),s.startAnimation(),t.element.addEventListener("scroll",m)}},o,g("panels",i,r))}
//# sourceMappingURL=home.min.js.map