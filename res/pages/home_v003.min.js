"use strict";import{a as C,br as k,div as E,h1 as I,h2 as H,img as A,mountableStylesheet as S,p as U,span as y,text as W}from"../lib/domHelper_v003.min.js";import{fetchApi as D,isMobile as F}from"../lib/lib.js";export default function(t){console.log("Home Init");const e=y(null,"slideOut",y("++")),n=S("./res/pages/home.css"),o=E("introduction",E("block",A("./res/assets/page_home/sort_function.png"),H("排序功能","title"),U("可對搜尋結果的任意欄位進行排序")),E("block",A("./res/assets/page_home/ncku_hub_comment_function.png"),H("NCKU HUB評論","title"),U("點擊課程評分即可查看評論")),E("block",A("./res/assets/page_home/urschool_instructor_info_function.png"),H("UrSchool教授評價","title"),U("點擊教師姓名查看講師評價、詳細資料及評論")),E("block",A("./res/assets/page_home/category_filter_function.png"),H("搜尋結果篩選","title"),U("可以自由選擇篩選條件，提供衝堂、精確節次、班別等篩選器")),E("block",A("./res/assets/page_home/schedule_download_function.png"),H("課表下載","title"),U("提供預排課表檢視，課表下載功能，下載漂亮的課表🥰")),E("block",A("./res/assets/page_home/add_course_function.png"),H("支援預排、選課","title"),U("登入後可跟選課網站連動，進行預排、志願登記、單科加選等操作"),U("搶課一律以成大系統為主，若使用本網站搶課未成功一概不負責","small"))),l=E("siteInfo",I(null,"title",A("res/assets/icon/icon_64.svg",""),y("NCKU"),e),U(null,"description",W("集合"),A("res/assets/courseNcku_logo.png","國立成功大學課程資訊及選課系統"),A("res/assets/nckuHub_logo.svg","NCKUHub"),A("res/assets/UrSchool_logo.png","UrSchool"),k(),W("眾多功能，提供更好的選課環境")),o,C(null,"./?page=CourseSearch","toCourseSearchLink",function(e){e.preventDefault(),t.openPage("CourseSearch"),window.navMenuClose()},y("前往課程查詢"))),s=E("scrollDownIndicator",{onclick:function(){_=!0,F()?this.lastElementChild.scrollIntoView&&this.lastElementChild.scrollIntoView({behavior:"smooth"}):this.scrollIntoView&&this.scrollIntoView({behavior:"smooth"})}},A("./res/assets/down_arrow_icon.svg","","scrollDownArrow"),I("最新消息","title")),r=E("newsPanel",E("splitLine"),E("items")),a=E("bulletinPanel",I("資訊","title"),E("splitLine"),E("items"));let i=!1,c=!1,u=0;const m={enrollmentAnnouncement:"選課公告",enrollmentInformation:"選課資訊",enrollmentFAQs:"選課FAQs",exploringTainan:"踏溯台南路線選擇系統",serviceRecommended:"服務學習推薦專區",contactInformation:"課程資訊服務聯絡窗口"},d=document.createElement("link");d.rel="canonical";let h=!(d.href="https://wavjaby.github.io/NCKUpp/"),f=0,p=(o.onmouseenter=function(){h=!0},o.onmouseleave=function(){h=!1},0),g=0,b=!1,_=!0;function v(){var e=Date.now(),t=e-u;o.scrollLeft!==g?(g=o.scrollLeft,_=!0,u=e,requestAnimationFrame(v)):_?(2e3<t&&(_=!1,u=e),requestAnimationFrame(v)):(u=e,1<(p+=t/1e3*40)&&(b?--o.scrollLeft:o.scrollLeft+=1,g=o.scrollLeft,p%=1),0===o.scrollLeft?b=!1:o.scrollWidth-o.clientWidth-o.scrollLeft<1&&(b=!0,_=!0),i&&requestAnimationFrame(v))}function w(e){h&&(e.preventDefault(),_||(f=o.scrollLeft),_=!0,o.scrollTo?((f+=e.deltaY)<0&&(f=0),o.scrollWidth-o.clientWidth-f<0&&(f=o.scrollWidth-o.clientWidth),o.scrollLeft!==f&&o.scrollTo({left:f,behavior:"smooth"})):o.scrollLeft+=e.deltaY)}function L(){var e=t.element.scrollTop/l.offsetHeight;e<=1&&(l.style.opacity=(1-1.2*e).toString()),c=.5<e?(c||s.classList.add("toLeft"),!0):(c&&s.classList.remove("toLeft"),!1)}return E("home",{onRender:function(){console.log("Home Render"),n.mount(),D("/homeInfo").then(e=>{if(null!=e&&e.success&&e.data){var e=e.data,t=r.lastElementChild;for(const s of e.news){var n=s.contents.map(e=>e instanceof Object?C(e.content,e.url,null,null,{target:"_blank"}):y(e));t.appendChild(E("news",y(s.department,"department"),U(null,"content",n),y(s.date,"date")))}var o=a.lastElementChild,l=e.bulletin;o.appendChild(C("原選課系統","https://course.ncku.edu.tw/","bulletin",null,{target:"_blank"}));for(const i in l)o.appendChild(C(m[i],l[i],"bulletin",null,{target:"_blank"}))}})},onPageClose:function(){console.log("Home Close"),n.disable(),e.style.width=null,document.head.removeChild(d),t.element.removeEventListener("scroll",L),t.element.removeEventListener("wheel",w),i=!1},onPageOpen:function(){console.log("Home Open"),n.enable(),setTimeout(()=>e.style.width=e.firstElementChild.offsetWidth+"px",700),document.head.appendChild(d),t.element.addEventListener("scroll",L),t.element.addEventListener("wheel",w),i=!0,u=Date.now(),v()}},l,s,E("panels",r,a))}