"use strict";import{a as C,br as k,div as E,h1 as I,h2 as H,img as A,mountableStylesheet as S,p as U,span as y,text as T}from"../lib/domHelper_v003.min.js";import{fetchApi as W,isMobile as D}from"../lib/lib.js";export default function(t){console.log("Home Init");const e=y(null,"slideOut",y("++")),o=S("./res/pages/home.css"),l=E("introduction",E("block",A("./res/assets/page_home/sort_function.png"),H("排序功能","title"),U("可對搜尋結果的任意欄位進行排序")),E("block",A("./res/assets/page_home/ncku_hub_comment_function.png"),H("NCKU HUB評論","title"),U("點擊課程評分即可查看評論")),E("block",A("./res/assets/page_home/urschool_instructor_info_function.png"),H("UrSchool教授評價","title"),U("點擊教師姓名查看講師評價、詳細資料及評論")),E("block",A("./res/assets/page_home/category_filter_function.png"),H("搜尋結果篩選","title"),U("可以自由選擇篩選條件，提供衝堂、精確節次、班別等篩選器")),E("block",A("./res/assets/page_home/add_course_function.png"),H("支援預排、加選","title"),U("登入後可跟選課網站連動，進行預排、單科加選等操作"),U("搶課一律以成大系統為主，若使用本網站搶課未成功一概不負責","small"))),n=E("siteInfo",I(null,"title",A("res/assets/icon/icon_64.svg",""),y("NCKU"),e),U(null,"description",T("集合"),A("res/assets/courseNcku_logo.png","國立成功大學課程資訊及選課系統"),A("res/assets/nckuHub_logo.svg","NCKUHub"),A("res/assets/UrSchool_logo.png","UrSchool"),k(),T("眾多功能，提供更好的選課環境")),l,C(null,"./?page=CourseSearch","toCourseSearchLink",function(e){e.preventDefault(),t.openPage("CourseSearch"),window.navMenuClose()},y("前往課程查詢"))),s=E("scrollDownIndicator",{onclick:function(){v=!0,D()?this.lastElementChild.scrollIntoView&&this.lastElementChild.scrollIntoView({behavior:"smooth"}):this.scrollIntoView&&this.scrollIntoView({behavior:"smooth"})}},A("./res/assets/down_arrow_icon.svg","","scrollDownArrow"),I("最新消息","title")),r=E("newsPanel",E("splitLine"),E("items")),a=E("bulletinPanel",I("資訊","title"),E("splitLine"),E("items"));let i=!1,c=!1,u=0;const m={enrollmentAnnouncement:"選課公告",enrollmentInformation:"選課資訊",enrollmentFAQs:"選課FAQs",exploringTainan:"踏溯台南路線選擇系統",serviceRecommended:"服務學習推薦專區",contactInformation:"課程資訊服務聯絡窗口"},h=document.createElement("link");h.rel="canonical";let d=!(h.href="https://wavjaby.github.io/NCKUpp/"),f=0,p=(l.onmouseenter=function(){d=!0},l.onmouseleave=function(){d=!1},0),g=0,b=!1,v=!0;function _(){var e=Date.now(),t=e-u;l.scrollLeft!==g?(g=l.scrollLeft,v=!0,u=e,requestAnimationFrame(_)):v?(2e3<t&&(v=!1,u=e),requestAnimationFrame(_)):(u=e,1<(p+=t/1e3*40)&&(b?--l.scrollLeft:l.scrollLeft+=1,g=l.scrollLeft,p%=1),0===l.scrollLeft?b=!1:l.scrollWidth-l.clientWidth-l.scrollLeft<1&&(l.scrollTo?(v=!0,l.scrollTo({left:0,behavior:"smooth"})):l.scrollLeft=0),i&&requestAnimationFrame(_))}function w(e){d&&(e.preventDefault(),v||(f=l.scrollLeft),v=!0,l.scrollTo?((f+=e.deltaY)<0&&(f=0),l.scrollWidth-l.clientWidth-f<0&&(f=l.scrollWidth-l.clientWidth),l.scrollLeft!==f&&l.scrollTo({left:f,behavior:"smooth"})):l.scrollLeft+=e.deltaY)}function L(){var e=t.element.scrollTop/n.offsetHeight;e<=1&&(n.style.opacity=(1-1.2*e).toString()),c=.5<e?(c||s.classList.add("toLeft"),!0):(c&&s.classList.remove("toLeft"),!1)}return E("home",{onRender:function(){console.log("Home Render"),o.mount(),W("/homeInfo").then(e=>{if(null!=e&&e.success&&e.data){var e=e.data,t=r.lastElementChild;for(const s of e.news){var o=s.contents.map(e=>e instanceof Object?C(e.content,e.url,null,null,{target:"_blank"}):y(e));t.appendChild(E("news",y(s.department,"department"),U(null,"content",o),y(s.date,"date")))}var l=a.lastElementChild,n=e.bulletin;l.appendChild(C("原選課系統","https://course.ncku.edu.tw/","bulletin",null,{target:"_blank"}));for(const i in n)l.appendChild(C(m[i],n[i],"bulletin",null,{target:"_blank"}))}})},onPageClose:function(){console.log("Home Close"),o.disable(),e.style.width=null,document.head.removeChild(h),t.element.removeEventListener("scroll",L),t.element.removeEventListener("wheel",w),i=!1},onPageOpen:function(){console.log("Home Open"),o.enable(),setTimeout(()=>e.style.width=e.firstElementChild.offsetWidth+"px",700),document.head.appendChild(h),t.element.addEventListener("scroll",L),t.element.addEventListener("wheel",w),i=!0,u=Date.now(),_()}},n,s,E("panels",r,a))}