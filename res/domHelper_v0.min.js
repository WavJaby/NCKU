"use strict";const havePushState="function"==typeof window.history.pushState;let debug=null;String.prototype.toUnicode=function(){return this.replace(/[^\x00-\xFF]/g,(function(t){return"\\u"+t.charCodeAt(0).toString(16).padStart(4,"0")}))};let urlSearchData=new URLSearchParams(window.location.search);function urlHashDataUpdate(){window.urlHashData=window.location.hash.length>1?JSON.parse(atob(window.location.hash.slice(1))):{}}function urlSearchDataUpdate(){urlSearchData=new URLSearchParams(window.location.search)}function addOption(t,e){for(let n=0;n<e.length;n++){const a=e[n];a instanceof Array?addOption(t,a):a instanceof Element||a instanceof Text?t.appendChild(a):a instanceof StateChanger||a instanceof ShowIfStateChanger?a.init(t):a instanceof Signal?new StateChanger(a).init(t):a instanceof Object?Object.assign(t,a):debug&&a&&debug.warn(t,"options type error: ",a)}}function parseTextInput(t,e){t instanceof Signal?e.textContent=new TextStateChanger(t).init(e):t instanceof TextStateChanger?e.textContent=t.init(e):"string"==typeof t||"number"==typeof t?e.textContent=t:debug&&debug.warn(e,"text type error: ",t)}function parseClassInput(t,e){t instanceof ClassList?t.init(e):"string"==typeof t?e.className+=t:debug&&debug.warn(e,"classname type error: ",t)}function Signal(t){const e=[];this.state=void 0!==t?t:null,this.addListener=function(t){e.push(t)},this.removeListener=function(t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)},this.set=function(t,n){if(this.state!==t||n){this.state=t;for(let n=0;n<e.length;n++)e[n](t)}},this.update=function(){for(let t=0;t<e.length;t++)e[t](this.state)}}function State(t,e){if(null==t)throw new TypeError("State signal not given");return new StateChanger(t,e)}function StateChanger(t,e){let n,a;function o(t){const o=e?e(t):t;a.replaceChild(o,n),n=o}this.init=function(r){a=r,r.appendChild(n=e?e(t.state):t.state?t.state:document.createElement("div")),t.addListener(o)}}function TextState(t,e){if(null==t)throw new TypeError("State signal not given");return new TextStateChanger(t,e)}function TextStateChanger(t,e){let n=null;t.addListener((function(t){n.textContent=e?e(t):t})),this.init=function(a){return n=a,e?e(t.state):t.state}}function ClassList(...t){const e=t;this.add=this.remove=this.toggle=this.contains=function(){},this.init=function(t){if(t.classList){for(let n=0;n<e.length;n++)t.classList.add(e[n]);this.add=function(e){t.classList.add(e)},this.remove=function(e){t.classList.remove(e)},this.toggle=function(e){return t.classList.toggle(e)},this.contains=function(e){t.classList.contains(e)}}else t.className+=e.join(" "),this.add=function(...n){Array.prototype.push.apply(e,n),t.className=e.join(" ")},this.remove=function(...n){for(let t=0;t<n.length;t++){const a=e.indexOf(n[t]);-1!==a&&e.splice(a,1)}t.className=e.join(" ")},this.toggle=function(n){const a=e.indexOf(n);let o;return-1!==a?(e.splice(a,1),o=!1):(e.push(n),o=!0),t.className=e.join(" "),o},this.contains=function(t){return-1!==e.indexOf(t)}}}function RouterLazyLoad(t,...e){this.url=t,this.parameters=e}function QueryRouter(t,e,n,a,o){const r=this,s=this.element=document.createElement("div");s.className="router";const i={},c={};let u,l=null,d=!1;function p(t,o){t||(t=urlSearchData.get("page")||n),(l!==t||o)&&(e[t]&&a[t]||(t=n),function(t,e){let n=i[t];if(n)return void h(n,t,e);n=a[t],n instanceof RouterLazyLoad?(d=!0,import(n.url).then((function(a){h(i[t]=a.default(r,...n.parameters),t,e),d=!1}))):h(i[t]=n,t,e)}(t,o))}function h(n,a,i){l!==a&&(document.title=t+" "+e[a],urlSearchData.set("page",a),i||window.pushHistory(),u?(c[l]=s.scrollTop,u.onPageClose&&u.onPageClose(),s.replaceChild(n,u)):(s.appendChild(n),o&&s.appendChild(o)),u=n),n.render||(n.render=!0,n.onRender()),s.scrollTop=c[a]||0,n.onPageOpen&&n.onPageOpen(!!i),r.onPageOpen&&r.onPageOpen(l,a,n),l=a}window.addEventListener("popstate",(function(){urlSearchDataUpdate(),urlHashDataUpdate(),p(null,!0)})),this.openPage=p,this.init=function(){urlSearchDataUpdate(),urlHashDataUpdate(),p(null,!0)},this.onPageOpen=null}function ShowIf(t,e){if(null==t)throw new TypeError("State signal not given");return new ShowIfStateChanger(t,e)}function ShowIfStateChanger(t,e){const n=document.createElement("div");let a,o=t.state;t.addListener((function(t){o!==t&&(o=t,t?(a.replaceChild(e,n),e.onRender&&e.onRender()):(e.onDestroy&&e.onDestroy(),a.replaceChild(n,e)))})),this.init=function(t){a=t,o&&e.onRender&&e.onRender(),t.appendChild(o?e:n)}}function div(t,...e){const n=document.createElement("div");return t&&parseClassInput(t,n),e.length&&addOption(n,e),n}function nav(t,...e){const n=document.createElement("nav");return t&&parseClassInput(t,n),e.length&&addOption(n,e),n}function ul(t,...e){const n=document.createElement("ul");return t&&parseClassInput(t,n),e.length&&addOption(n,e),n}function li(t,...e){const n=document.createElement("li");return t&&parseClassInput(t,n),e.length&&addOption(n,e),n}function input(t,e,n,...a){const o=document.createElement("input");return t&&parseClassInput(t,o),e&&(o.placeholder=e),n&&(o.id=n),a.length&&addOption(o,a),o}function label(t,e,n,...a){const o=document.createElement("label");return t&&parseClassInput(t,o),e&&parseTextInput(e,o),n&&(n.id||(n.id=Math.random().toString(16).substring(2)),o.htmlFor=n.id),a.length&&addOption(o,a),o}function checkbox(t,e,n,...a){const o=document.createElement("input");return o.type="checkbox",t&&parseClassInput(t,o),o.onchange=e,n&&(o.id=n),a.length&&addOption(o,a),o}function checkboxWithName(t,e,n,a,...o){const r=document.createElement("input");r.type="checkbox",r.onchange=a,r.checked=!!n;const s=document.createElement("div");s.className="checkmark";const i=document.createElement("label");return i.className="checkboxWithName noSelect",t&&parseClassInput(t,i),i.appendChild(r),i.appendChild(s),i.appendChild(document.createTextNode(e)),i.input=r,o.length&&addOption(i,o),i}function button(t,e,n,...a){const o=document.createElement("button");return t&&parseClassInput(t,o),e&&parseTextInput(e,o),n&&(o.onclick=n),a.length&&addOption(o,a),o}function table(t,...e){const n=document.createElement("table");return t&&parseClassInput(t,n),e.length&&addOption(n,e),n}function thead(t,...e){const n=document.createElement("thead");return t&&parseClassInput(t,n),e.length&&addOption(n,e),n}function tbody(t,...e){const n=document.createElement("tbody");return t&&parseClassInput(t,n),e.length&&addOption(n,e),n}function colgroup(t,...e){const n=document.createElement("colgroup");return t&&parseClassInput(t,n),e.length&&addOption(n,e),n}function col(t,...e){const n=document.createElement("col");return t&&parseClassInput(t,n),e.length&&addOption(n,e),n}function tr(t,...e){const n=document.createElement("tr");return t&&parseClassInput(t,n),e.length&&addOption(n,e),n}function th(t,e,...n){const a=document.createElement("th");return e&&parseClassInput(e,a),t&&parseTextInput(t,a),n.length&&addOption(a,n),a}function td(t,e,...n){const a=document.createElement("td");return e&&parseClassInput(e,a),t&&parseTextInput(t,a),n.length&&addOption(a,n),a}function h1(t,e,...n){const a=document.createElement("h1");return e&&parseClassInput(e,a),t&&parseTextInput(t,a),n.length&&addOption(a,n),a}function h2(t,e,...n){const a=document.createElement("h2");return e&&parseClassInput(e,a),t&&parseTextInput(t,a),n.length&&addOption(a,n),a}function h3(t,e,...n){const a=document.createElement("h3");return e&&parseClassInput(e,a),t&&parseTextInput(t,a),n.length&&addOption(a,n),a}function h4(t,e,...n){const a=document.createElement("h4");return e&&parseClassInput(e,a),t&&parseTextInput(t,a),n.length&&addOption(a,n),a}function h5(t,e,...n){const a=document.createElement("h5");return e&&parseClassInput(e,a),t&&parseTextInput(t,a),n.length&&addOption(a,n),a}function h6(t,e,...n){const a=document.createElement("h6");return e&&parseClassInput(e,a),t&&parseTextInput(t,a),n.length&&addOption(a,n),a}function a(t,e,n,a,...o){const r=document.createElement("a");return n&&parseClassInput(n,r),e&&(r.href=e),t&&parseTextInput(t,r),a&&(r.onclick=a),o.length&&addOption(r,o),r}function p(t,e,...n){const a=document.createElement("p");return e&&parseClassInput(e,a),t&&parseTextInput(t,a),n.length&&addOption(a,n),a}function span(t,e,...n){const a=document.createElement("span");return e&&parseClassInput(e,a),t&&parseTextInput(t,a),n.length&&addOption(a,n),a}function text(t){if(debug&&"string"!=typeof t){const e=document.createTextNode(t);return debug.warn(e,"text type error: ",t),e}return document.createTextNode(t)}function br(){return document.createElement("br")}function img(t,e,...n){const a=document.createElement("img");return e&&parseClassInput(e,a),t&&(a.src=t),n.length&&addOption(a,n),a}function svg(t,e,n,...a){const o=document.createElementNS("http://www.w3.org/2000/svg","svg");return o.innerHTML=t,n&&o.setAttributeNS(null,"class",n),e&&o.setAttributeNS(null,"viewBox",e),a.length&&addOption(o,a),o}function mountableStylesheet(t){const e=document.createElement("link");return e.rel="stylesheet",e.href=t,e.mount=function(){document.head.appendChild(e)},e.unmount=function(){document.head.removeChild(e)},e.enable=function(){e.disabled=!1},e.disable=function(){e.disabled=!0},e}function footer(...t){const e=document.createElement("footer");return t.length&&addOption(e,t),e}function iframe(t,e,...n){const a=document.createElement("iframe");return e&&parseClassInput(e,a),t&&(a.src=t),n.length&&addOption(a,n),a}function dom(t,e,...n){const a=document.createElement(t);return e&&parseClassInput(e,a),n.length&&addOption(a,n),a}function doomHelperDebug(){debug=console}window.urlHashData=null,urlHashDataUpdate(),window.pushHistory=function(){const t=new URL(window.location),e=JSON.stringify(window.urlHashData);t.hash="{}"===e?"":btoa(e.toUnicode()),t.search=urlSearchData.toString(),debug&&debug.log("Append history",window.urlHashData,Object.fromEntries(urlSearchData)),havePushState?window.history.pushState({},document.title,t):window.location=t};export{Signal,ShowIf,State,TextState,ClassList,QueryRouter,RouterLazyLoad,doomHelperDebug,div,nav,ul,li,label,input,checkbox,checkboxWithName,button,table,thead,tbody,colgroup,col,th,tr,td,h1,h2,h3,h4,h5,h6,a,p,span,text,br,img,svg,mountableStylesheet,footer,iframe,dom};